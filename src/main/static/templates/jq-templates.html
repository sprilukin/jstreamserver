<script id="dirListTmpl" type="text/template">
    <% _.each(files, function(file) { %>
    <li id="<%= file.id %>">
        <% if (file.directory) { %>
        <div class="directory">
        <% } else { %>
        <div class="file <% if (file.mediaInfo) { %>media<%}%>">
        <% } %>
            <div>
                <span class="icon"></span>
                <% if (file.liveStreamSupported) { %>
                <a href="/livestream?file=<%=file.url%>" title="<%=file.name%>"><%=file.name%></a>
                <span class="ajax-loader hidden"></span>
                <% } else { %>
                <a href="/?path=<%=file.url%>" title="<%=file.name%>"><%=file.name%></a>
                <% } %>
            </div>
            <% if (file.mediaInfo) { %>
            <div class="mediaInfo">
                <div class="common">
                    <span class="label">bitrate: </span><span><%=file.mediaInfo.bitrate%></span>
                    <span class="label">duration: </span><span><%=file.mediaInfo.duration%></span>
                <div class="common">
                <% if (file.mediaInfo.videoStreams.length > 0) { %>
                <div class="video">
                    <span class="label">video: </span>
                    <span><%=file.mediaInfo.videoStreams[0].encoder%></span>
                    <span>, <%=file.mediaInfo.videoStreams[0].resolution%></span>
                    <% if (file.mediaInfo.videoStreams[0].language) { %>
                    <span>, (<%=file.mediaInfo.videoStreams[0].language%>)</span>
                    <% } %>
                </div>
                <% } %>
                <% if (file.mediaInfo.audioStreams.length > 0) { %>
                <div class="audio">
                    <span class="label">audio: </span>
                    <% _.each(file.mediaInfo.audioStreams, function(stream, index) { %>
                    <span class="label">[</span>
                    <span>
                        <% if (file.liveStreamSupported) { %>
                        <a href="/livestream?file=<%=file.url%>&stream=<%=stream.id%>" title="Play <%=file.name%> with audio stream <%=index%>">
                        <% } %>
                        <%=stream.encoder%>, <%=stream.frequency%>, <%=stream.channels%>
                        <% if (stream.language) { %>, (<%=stream.language%>)<% } %>
                        <% if (stream.defaultStream) { %>, (default)<% } %>
                        <% if (file.liveStreamSupported) { %>
                        </a>
                        <% } %>
                    </span>
                    <span class="label">] </span>
                    <% }) %>
                </div>
                <% } %>
            </div>
            <% } %>
        </div>
    </li>
    <% }) %>
</script>

<script id="breadcumbTmpl" type="text/template">
    <% _.each(breadCrumbs, function(breadCrumb) { %>
    <span class="breadcrumb-item">
        <span>[</span><a href="/?path=<%=breadCrumb.url%>"><%=breadCrumb.name%></a><span>]</span>
    </span>
    <% }) %>
</script>

<script id="livestreamTmpl" type="text/template">
    <div class="subtitles-video-wrapper">
        <video controls="controls" autoplay="autoplay" id="streamVideo">
            <% _.each(sources, function(source) { %>
            <source src="<%=source.url%>" type="<%=source.type%>" />
            <% }) %>
            Your browser does not support the video tag.
        </video>
        <div class="subtitles-panel"></div>
    </div>
    <% if (subtitle) { %>
    <div class="hidden subtitles" data-src="/?path=<%=subtitle%>" data-video="streamVideo"></div>
    <% } %>
</script>
